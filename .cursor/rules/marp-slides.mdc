---
description: Rules for generating Marp presentation slides
globs: src/**/*.md
---

# Marp Presentation Rules

## Context
This project uses Marp (Markdown Presentation Ecosystem) to generate slides from Markdown.
- **Slides Directory**: `src/slides/` (user-created presentations)
- **Demo Directory**: `src/demo/` (theme showcases and examples)
- **Themes**: `src/themes/` (custom CSS themes)
- **Assets**: `src/assets/` (images, icons, videos)
- **Engine**: `@marp-team/marp-cli`

## 1. Pre-Generation Research Requirement (CRITICAL)

Before generating or modifying slides, you **MUST**:
1.  **Search for latest Marp syntax (Context7)**: Always use `mcp_context7_query-docs` to consult official documentation for the most up-to-date Marp syntax, directives, and features.
2.  **Search for Best Practices (Web)**: Use `web_search` to research current presentation design trends and best practices (e.g., "effective slide layouts 2024").
3.  **Verify syntax**: Ensure any directives (e.g., `<!-- _class: invert -->`) or image attributes (e.g., `![bg right:40%]`) are currently supported.

## 2. Trigger Commands

### `@slide` - Create NEW Presentation

When user inputs `@slide` followed by ideas/points, **ALWAYS create a NEW slide file**:

1.  **Parse & Plan**:
    *   Extract the core topic and key points.
    *   Generate a filename from the topic (kebab-case, e.g., `project-alpha-launch.md`)
    *   **Theme Selection**: Suggest or select a theme based on content tone:
        *   Business/Formal -> `corporate`
        *   Code/Tech -> `developer`
        *   Creative/Marketing -> `gradient`
        *   Clean/Academic -> `minimal`
        *   Elegant/Evening -> `midnight`
    *   Structure the presentation:
        *   **Title Slide**: Title, Subtitle, Presenter Name.
        *   **Agenda/Overview**: Brief list of what will be covered.
        *   **Content Slides**: Break down points (1 idea per slide).
        *   **Conclusion**: Summary and Q&A.
2.  **Generate Content**:
    *   Create new file in `src/slides/<topic-name>.md`
    *   Apply **Presentation Best Practices** (see below).
    *   Use appropriate Marp syntax for layout and styling.

**Example:**
```text
@slide
Topic: Project Alpha Launch
Points:
- Successfully deployed to prod
- User adoption up 20%
- Next steps: Mobile app
```

**AI Action:** Creates `src/slides/project-alpha-launch.md` with full presentation.

### `@slide-update` - Update EXISTING Presentation

When user inputs `@slide-update` followed by ideas/changes:

1.  **Identify Target**: Look for the currently open slide file or ask user which file to update.
2.  **Modify Content**:
    *   Read the existing slide file.
    *   Apply user's requested changes (add slides, modify content, reorder, etc.).
    *   Preserve existing structure unless explicitly asked to change.
3.  **Save Changes**: Update the existing file in place.

## 3. Image Generation & Management

### Image Storage
All presentation images **MUST** be stored in `src/assets/images/` with kebab-case filenames matching the slide topic.

### When Creating Slides with Background Images

For each slide that needs a background image:

1.  **Create placeholder image file**: Generate an empty/placeholder PNG in `src/assets/images/<image-name>.png`
2.  **Reference local path**: Use `![bg right:40%](../assets/images/<image-name>.png)` instead of external URLs
3.  **Generate AI prompt**: After creating the slide file, output a **Image Generation Prompts** section with suggested prompts for each placeholder

### Placeholder Image Creation

When a slide needs a background image, create an empty placeholder:

```bash
# Create a 1x1 transparent PNG as placeholder
echo "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==" | base64 -d > src/assets/images/<image-name>.png
```

### AI Image Generation Prompts

After creating slides, **ALWAYS** output a section titled **"Image Generation Prompts"** with:

| Image File | Slide | AI Prompt |
|------------|-------|-----------|
| `<filename>.png` | Slide N: Title | Full prompt for AI image generation |

#### Prompt Template Structure

```
[Subject/Scene description], [color scheme matching theme], [style: modern corporate/tech/gradient/minimal/elegant], professional presentation visual, clean composition, 16:9 aspect ratio, 4K quality
```

#### Color Schemes by Theme

| Theme | Primary Colors | Accent |
|-------|---------------|--------|
| `corporate` | Blue `#2563eb`, White | Gold `#b8860b` |
| `developer` | Dark `#1e1e1e`, Green `#4ec9b0` | Purple `#c586c0` |
| `gradient` | Purple `#8b5cf6`, Pink `#ec4899` | Blue `#3b82f6` |
| `minimal` | White, Gray `#6b7280` | Black |
| `midnight` | Dark Blue `#1e3a5f`, Gold `#ffd700` | White |

#### Example Prompts by Content Type

*   **Evaluation/Comparison**: "Balanced scale icon with checkmark and warning symbols, [theme colors], modern flat design, business presentation style"
*   **Use Cases/Applications**: "Abstract AI chatbot illustration, multiple chat bubbles with icons, [theme colors], isometric design"
*   **Implementation/Roadmap**: "Roadmap visualization with milestone checkpoints, [theme colors], strategic planning infographic"
*   **Technology/Platform**: "Futuristic AI dashboard with neural network nodes, [theme colors], enterprise software concept"
*   **Summary/Conclusion**: "Abstract key takeaways with interconnected circles, [theme colors], synthesis concept"
*   **Automotive/Dealership**: "Luxury car showroom with digital assistant, [theme colors], premium automotive atmosphere"

## 4. Presentation Best Practices

Apply these principles to all generated slides:

*   **One Idea Per Slide**: Don't cram multiple complex topics onto one slide.
*   **6x6 Rule**: Max 6 bullet points per slide, max 6 words per bullet.
*   **Visuals Over Text**:
    *   Use images/diagrams to explain concepts.
    *   **Local Images**: Always use `![bg right:40%](../assets/images/<topic>.png)` with local placeholder files.
*   **Consistent Formatting**:
    *   Use the same theme throughout.
    *   Keep headers hierarchical (`#` for slide titles, `##` for content headers).
*   **Readable Typography**:
    *   Marp handles sizing, but avoid deep nesting of lists.
    *   Use **bold** for emphasis, not CAPS.

## 5. Marp Syntax Reference

### Front-matter (Required)
Always start slides with:
```yaml
---
marp: true
theme: default # or gaia, uncover, corporate, developer, gradient, minimal, midnight
paginate: true
header: 'Project Name'
footer: '© 2024 Company'
---
```

### Slide Separation
Use `---` surrounded by blank lines to separate slides.

### Directives
*   **Global** (in front-matter): `theme`, `size` (16:9 or 4:3)
*   **Local** (per slide, use underscore): `<!-- _class: invert -->`
*   **Scoped** (applies to current slide and following): `<!-- class: lead -->`

### Images
*   **Standard**: `![width:500px](image.png)`
*   **Background**: `![bg](image.jpg)`
*   **Split Background**: `![bg right:40%](image.jpg)` (Places image on right 40%, text on left)
*   **Filters**: `![bg brightness:0.8](image.jpg)`

### Speaker Notes
Use HTML comments:
```markdown
<!-- 
Speaker note:
Remember to pause here and ask for questions.
-->
```

## 6. Directory Structure

```
src/
├── slides/              # User presentations (created via @slide)
│   └── <topic>.md       # Slide files
├── demo/                # Theme demos
│   ├── theme-corporate.md
│   ├── theme-developer.md
│   ├── theme-gradient.md
│   ├── theme-minimal.md
│   └── theme-midnight.md
├── themes/              # Custom CSS themes
└── assets/
    └── images/          # Presentation images (REQUIRED location)
        ├── <topic>-<section>.png  # Named by slide topic
        └── sample.png   # Example placeholder
```

## 7. Complete Workflow Example

### Input
```text
@slide
Topic: Q1 Sales Review
Points:
- Revenue up 15%
- New customer acquisition
- Regional performance
```

### AI Actions
1.  Create `src/slides/q1-sales-review.md` with slides
2.  Create placeholder images in `src/assets/images/`:
    - `q1-sales-review-intro.png`
    - `q1-sales-review-revenue.png`
    - `q1-sales-review-customers.png`
    - `q1-sales-review-regional.png`
    - `q1-sales-review-summary.png`
3.  Output **Image Generation Prompts** table:

| Image File | Slide | AI Prompt |
|------------|-------|-----------|
| `q1-sales-review-intro.png` | 1: Title | "Business team celebrating success, blue corporate gradient, modern office setting, professional atmosphere, 16:9, 4K" |
| `q1-sales-review-revenue.png` | 3: Revenue | "Rising bar chart with golden highlights, blue corporate theme, financial growth visualization, clean infographic, 16:9" |
| `q1-sales-review-customers.png` | 5: Customers | "Network of connected people icons, customer acquisition concept, blue and green gradient, modern flat design, 16:9" |
| `q1-sales-review-regional.png` | 7: Regional | "World map with highlighted regions, data visualization overlay, blue corporate colors, geographic analysis, 16:9" |
| `q1-sales-review-summary.png` | 9: Summary | "Key metrics dashboard with checkmarks, blue corporate theme, executive summary visual, clean composition, 16:9" |
